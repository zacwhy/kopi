<!doctype html>
<html>
  <head>
    <title>Orders</title>
  </head>
  <body>
    <form id="order">
      <input id="party" placeholder="Name" required />
      <select id="product" required>
        <option></option>
      </select>
      <button>Order</button>
    </form>
    <pre id="json"></pre>
    <script src="/socket.io/socket.io.js"></script>
    <script>
fetch(new Request('products'))
  .then(response => response.json())
  .then(products => {
    const select = document.getElementById('product');
    products.forEach(product => {
      const option = document.createElement('option');
      option.value = product;
      option.innerHTML = product;
      select.appendChild(option);
    });
  });

const socket = io();

document.getElementById('order').onsubmit = () => {
  const
    party = document.getElementById('party').value,
    product = document.getElementById('product').value;
  socket.emit('order', party, product);
  return false;
};

socket.on('orders', orders => {
  document.getElementById('json').innerHTML = JSON.stringify(orders, undefined, 2);
});
    </script>
  </body>
</html>
